<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/headTag :: headTag"> ... </head>
<body>
<script>

function loginRedirect() {
	alert("Account successfully created.\n You will now be directed to the home page");
	window.location = "/home";
}

function validatePassword() {
    //Store the password field objects into variables ...
    var pass1 = document.getElementById('password');
    var pass2 = document.getElementById('confpassword');
    if (pass1.length == 0) {
        alert("please enter a password");
        return false;
    }
    if (pass1.value == pass2.value){
        return true;
    } else {
        alert("Passwords Do Not Match");
        return false;
    }
}

</script>
	<div id="main">
		<div id="header" th:include="fragments/bodyHeader :: bodyHeader"> ... </div>
		<h2>Create Account</h2>
		
		<!-- content begin -->
		<span class="error" th:if="${error}">There was a problem updating this customer</span>
		<span class="error" th:if="${success}">Your account was created!</span>
		<span class="error" th:if="${emailExists}">This email address has already been registered</span>

			<form id="customerForm" th:action="@{/newCustSubmit}" th:object="${customer}" method="post" onsubmit="return validatePassword();">
				<input type="hidden" name="id" th:value="${customer.id}" />
		        <table class="formTable">
		            <tr th:if="${#vars['validationErrorFlag'] != null}">
		                <td colspan="2" style="text-align:left">
		                    <span class="error smallText"><span th:text="#{validationErrorMessage"/>
		
		                      <span th:if="${nameError} != null">
		                        <br/><span class="indent" th:text="#{nameError}"></span>
		                      </span>
		                      <span th:if="${emailError} != null">
		                        <br/><span class="indent" th:text="#{emailError}"></span>
		                      </span>
		                      <span th:if="${phoneError} != null">\
		                        <br/><span class="indent" th:text="#{phoneError}"></span>
		                      </span>
		                      <span th:if="${addressError} != null">\
		                        <br/><span class="indent" th:text="#{addressError}"></span>
		                      </span>
		                      <span th:if="${cityRegionError} != null">\
		                        <br/><span class="indent" th:text="#{cityRegionError}"></span>
		                      </span>
		                      <span th:if="${ccNumberError} != null">\
		                        <br/><span class="indent" th:text="#{ccNumberError}"></span>
		                      </span>
		                      <span th:if="${passwordError} != null">\
		                        <br/><span class="indent">password</span>
		                      </span>
		
		                    </span>
		                </td>
		            </tr>

		            <tr>
		                <td><label for="name" th:text="|#{customerName}:|">name</label></td>
		                <td class="inputField">
		                    <input type="text"
		                           size="31"
		                           maxlength="45"
		                           id="name"
		                           name="name"
		                           th:value="${customer.name}" />
		                </td>
		            </tr>
		            <tr>
		                <td><label for="email" th:text="|#{email}:|">email</label></td>
		                <td class="inputField">
		                    <input type="text"
		                           size="31"
		                           maxlength="45"
		                           id="email"
		                           name="email"
		                           th:value="${customer.email}" />
		                </td>
		            </tr>
		            <tr>
		                <td><label for="phone" th:text="|#{phone}:|"></label></td>
		                <td class="inputField">
		                    <input type="text"
		                           size="31"
		                           maxlength="16"
		                           id="phone"
		                           name="phone"
		                           th:value="${customer.phone}" />
		                </td>
		            </tr>
		            <tr>
		                <td><label for="address" th:text="|#{address}:|">address</label></td>
		                <td class="inputField">
		                    <input type="text"
		                           size="31"
		                           maxlength="45"
		                           id="address"
		                           name="address"
		                           th:value="${customer.address}" />
		
		                    <br/>
		                    <span th:text="#{prague}"></span>
		                    <select name="cityRegion">
								<option th:each="regionNumber : ${#numbers.sequence(1,10)}" th:value="${regionNumber}" th:text="${regionNumber}" th:selected="${customer.cityRegion eq (regionNumber)}"></option>
		                    </select>
		                </td>
		            </tr>
		            <tr>
		                <td><label for="ccNumber" th:text="|#{creditCard}:|">credit card</label></td>
		                <td class="inputField">
		                    <input type="text"
		                           size="31"
		                           maxlength="19"
		                           id="ccNumber"
		                           name="ccNumber"
		                           class="creditcard"
		                           th:value="${customer.ccNumber}" />
		                </td>
		            </tr>
		            <tr>
		                <td><label for="password">password:</label></td>
		                <td class="inputField">
		                    <input type="password"
		                           size="31"
		                           id="password"
		                           name="password"
		                           class="password" />
		                </td>
		            </tr>
		            <tr>
		                <td><label for="confpassword">confirm password:</label></td>
		                <td class="inputField">
		                    <input type="password"
		                           size="31"
		                           id="confpassword"
		                           name="confpassword"
		                           class="password" />
		                </td>
		            </tr>
		            <tr>
		                <td colspan="2">
		                    <input type="submit" value="submit" />
		                </td>
		            </tr>
		        </table>
		    </form>

		<!-- content end -->
		
		<div id="footer" th:include="fragments/bodyFooter :: bodyFooter"></div>
	</div>
<span class="error" th:if="${success}">
	<script type="text/javascript">
		loginRedirect();
	</script>
</span>
</body>
</html>